---
categories:
  ld:
    cond-id: 2 
    # the list of tools to generate configurations for
    tools: [ encoder, decoder, mmetric ]

    # NB: common options are in cfg-tools.yaml
    encoder:
      - analyzeGof: 1
      # if the encoder should ignore subdivsion, use subdiv=base
      # NB: If the subdiv mesh was computed with it=0, it is the same as base.
      #     However, some base meshes in the CfP submission were generated with
      #     it>0, causing the base mesh to be fitted to the subdivision result
      #     even though the sequence wasn't coded with the subdivision mesh.
      # - - !conditional 'not defined ${fitsubdiv_inter} or ${fitsubdiv_inter} == 0'
      - - !conditional '${pp} > 0.24 and ${pp} < 1.0'
        - subdivIsBase: 1
      # if pp not set, or no decimation, use input sequence
      - - !conditional 'not defined ${pp} or ${pp} == 1.0'
        - baseIsSrc:    1 
        - subdivIsBase: 1    
          
      - - !conditional 'defined ${fitsubdiv_inter}'
        - subdivInter: ${fitsubdiv_inter}

      # configuration for HM
      - gvencconfig: ${cfg-prefix}/hm/ctc-hm-displacements-map-ld-main10.cfg
      - - !conditional 'defined ${fitsubdiv_inter} and ${fitsubdiv_inter} == 1'
        - tvencconfig: ${cfg-prefix}/hm/ctc-hm-texture-ld.cfg
      - - !conditional 'not defined ${fitsubdiv_inter} or ${fitsubdiv_inter} == 0'
        - tvencconfig: ${cfg-prefix}/hm/ctc-hm-texture-ai.cfg

    # sequences to code in this condition, and their overridden options/vars    
    sequences:
      longdress:
        seq-id: 1
        pp: { r1: 0.03, r2: 0.06, r3: 0.06, r4: 0.24, r5: 1.00 }
        encoder:
          - liftingIt: { r1: 3, r2: 3, r3: 3, r4: 2, r5: 0 }
          - gqp: 10
          - tvqp: { r1: 49, r2: 44, r3: 40, r4: 40, r5: 40 }
          - dqp: { r1: "32,44,44", r2: "27,39,39", r3: "27,39,39", r4: "28,40,40", r5: "34,46,46" }
          - unifvertices: { r5: 1 }

      soldier:
        seq-id: 2
        fitsubdiv_inter: 1
        fitsubdiv_with_mapping: 0
        pp: { r1: 0.03, r2: 0.06, r3: 0.06, r4: 0.06, r5: 0.06 }
        encoder:
          - liftingIt: 3
          - gqp: 10
          - tvqp: { r1: 36, r2: 34, r3: 33, r4: 30, r5: 26 }
          - dqp: { r1: "37,49,49", r2: "27,39,39", r3: "22,34,34", r4: "22,34,34", r5: "21,33,33" }
          
      basketball_player:
        seq-id: 3
        pp: { r1: 0.03, r2: 0.03, r3: 0.06, r4: 0.36, r5: 0.48 }
        encoder:
          - liftingIt: { r1: 3, r2: 3, r3: 3, r4: 0, r5: 0 }
          - gqp: { r1: 11, r2: 11, r3: 11, r4: 12, r5: 12 }
          - tvqp: { r1: 41, r2: 38, r3: 30, r4: 29, r5: 25 }
          - dqp: { r1: "43,55,55", r2: "25,37,37", r3: "23,35,35", r4: "28,40,40", r5: "30,42,42" }

      dancer:
        seq-id: 4
        pp: { r1: 0.03, r2: 0.03, r3: 0.06, r4: 0.48, r5: 0.48 }
        encoder:
          - liftingIt: { r1: 3, r2: 3, r3: 3, r4: 0, r5: 0 }
          - gqp: { r1: 11, r2: 11, r3: 11, r4: 12, r5: 12 }
          - tvqp: { r1: 42, r2: 39, r3: 32, r4: 32, r5: 26 }
          - dqp: { r1: "42,54,54", r2: "24,36,36", r3: "21,33,33", r4: "28,40,40", r5: "28,40,40" }

      mitch:
        seq-id: 5
        fitsubdiv_inter: 1
        fitsubdiv_with_mapping: 1
        pp: { r1: 0.06, r2: 0.06, r3: 0.06, r4: 1.00, r5: 1.00 }
        encoder:
          - liftingIt: { r1: 3, r2: 3, r3: 3, r4: 0, r5: 0 }
          - gqp: { r1: 11, r2: 11, r3: 11, r4: 12, r5: 12 }
          - tvqp: { r1: 39, r2: 37, r3: 41, r4: 42, r5: 38 }
          - dqp: { r1: "32,44,44", r2: "30,42,42", r3: "24,36,36", r4: "34,46,46", r5: "32,44,44" }
          - texwidth: { r3: 4096, r4: 4096, r5: 4096 }
          - texheight: { r3: 4096, r4: 4096, r5: 4096 }
          - unifvertices: { r4: 1, r5: 1 }

      thomas:
        seq-id: 6
        fitsubdiv_inter: 1
        fitsubdiv_with_mapping: 1
        pp: { r1: 0.06, r2: 0.06, r3: 0.06, r4: 1.00, r5: 1.00 }
        encoder:
          - liftingIt: { r1: 3, r2: 3, r3: 3, r4: 0, r5: 0 }
          - gqp: { r1: 11, r2: 11, r3: 11, r4: 12, r5: 12 }
          - tvqp: { r1: 36, r2: 34, r3: 38, r4: 38, r5: 34 }
          - dqp: { r1: "30,42,42", r2: "28,40,40", r3: "22,34,34", r4: "34,46,46", r5: "34,46,46" }
          - texwidth: { r3: 4096, r4: 4096, r5: 4096 }
          - texheight: { r3: 4096, r4: 4096, r5: 4096 }
          - unifvertices: { r4: 1, r5: 1 }
          
      football:
        seq-id: 7
        pp: { r1: 0.03, r2: 0.06, r3: 0.24, r4: 0.48, r5: 0.72 }
        encoder:
          - liftingIt: { r1: 3, r2: 3, r3: 2, r4: 0, r5: 0 }
          - gqp: { r1: 11, r2: 11, r3: 11, r4: 12, r5: 12 }
          - tvqp: { r1: 44, r2: 37, r3: 43, r4: 41, r5: 36 }
          - dqp: { r1: "40,52,52", r2: "34,46,46", r3: "26,38,38", r4: "30,42,42", r5: "27,39,39" }
          - texwidth: { r3: 4096, r4: 4096, r5: 4096 }
          - texheight: { r3: 4096, r4: 4096, r5: 4096 }

      levi:
        seq-id: 8
        fitsubdiv_inter: { r1: 1, r2: 1, r3: 1, r4: 1, r5: 0 }
        fitsubdiv_with_mapping: 1        
        pp: { r1: 0.03, r2: 0.12, r3: 0.12, r4: 0.24, r5: 0.48 }
        encoder:
          - liftingIt: { r1: 3, r2: 2, r3: 2, r4: 2, r5: 0 }
          - gqp: { r1: 11, r2: 11, r3: 11, r4: 11, r5: 12 }
          - tvqp: { r1: 38, r2: 39, r3: 34, r4: 32, r5: 30 }
          - dqp: { r1: "34,46,46", r2: "32,44,44", r3: "30,42,42", r4: "24,36,36", r5: "28,40,40" }
          - texwidth: { r2: 4096, r3: 4096, r4: 4096, r5: 4096 }
          - texheight: { r2: 4096, r3: 4096, r4: 4096, r5: 4096 }
          # r5 in the CfP submission uses all-intra config (not just no inter)
          - gvencconfig: { r5: "${cfg-prefix}/hm/ctc-hm-displacements-map-ai-main10.cfg" }


